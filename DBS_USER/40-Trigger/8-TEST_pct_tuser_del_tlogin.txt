-- =====================================================================================================================
--
-- TEST pct_tuser_del_tlogin
--
-- =====================================================================================================================


-- =====================================================================================================================
--
-- Preapare Test Data
--
-- =====================================================================================================================

set @var_userid = 'user9999';
set @var_username = '트리거';

set @var_logid = 'login9999';
set @var_passwd = 'qwerty9999';


-- ------------------------------------------------------------------------
CALL pc_tuser_ins(@var_userid, @var_username, @res, @res2); 
-- ------------------------------------------------------------------------
select @var_userid, @var_username, @res, @res2;
select id, SUBSTRING(name, 1,20), dt7, dt8 FROM tuser;
    

-- ------------------------------------------------------------------------
CALL pc_tlogin_ins(@var_logid, @var_passwd, @var_userid, @res, @res2); 
-- ------------------------------------------------------------------------
select @var_logid, @var_passwd, @var_userid;
select @res, @res2;
select * from tlogin;
   


-- =====================================================================================================================
--
-- Delete tlogin.ROW as tuser.ROW is deleted
--
-- =====================================================================================================================

-- ------------------------------------------------------------------------
CALL pc_tuser_del(@var_userid, @res, @res2); 
-- ------------------------------------------------------------------------
select @var_userid;
select @res, @res2;
select id, SUBSTRING(name, 1,20), dt7, dt8 FROM tuser;

-- ------------------------------------------------------------------------
CALL pc_tlogin_sel(@var_logid, @passwd, @userid, @res, @res2);
-- ------------------------------------------------------------------------
select @var_logid, @passwd, @userid;
select @res, @res2;
select * from tlogin;


-- =====================================================================================================================
--
-- Remove Test Data
--
-- =====================================================================================================================

-- ------------------------------------------------------------------------
CALL pc_tuser_del(@var_userid, @res, @res2); 
-- ------------------------------------------------------------------------
select @var_userid;
select @res, @res2;
select id, SUBSTRING(name, 1,20), dt7, dt8 FROM tuser;


-- ------------------------------------------------------------------------
CALL pc_tlogin_del(@var_logid, @res, @res2); 
-- ------------------------------------------------------------------------
select @var_logid;
select @res, @res2;
select * from tlogin;



    



